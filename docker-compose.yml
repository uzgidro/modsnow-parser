version: '3.8'

services:
  ocr-api:
    build: .
    container_name: modsnow-ocr-api
    ports:
      - "8000:8000"
    volumes:
      - ./temp:/app/temp  # Persist temp files (optional)
    environment:
      # OCR Settings
      - OCR_LANGUAGES=en
      - OCR_GPU=false  # Set to true if you have GPU support in Docker
      - MAX_CONCURRENT_OCR=4
      - MAX_IMAGES_PER_REQUEST=50

      # File Settings
      - MAX_ARCHIVE_SIZE_MB=100
      - MAX_IMAGE_SIZE_MB=10

      # API Settings
      - API_TITLE=OCR Image Processing API
      - API_VERSION=1.0.0
    restart: unless-stopped
    # Uncomment below if you have NVIDIA GPU
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #         - driver: nvidia
    #           count: 1
    #           capabilities: [gpu]
